---
layout: post
title: "Excess of Private Methods is a Code Smell"
date: 2011-09-20
comments: false
categories:
 - Object Oriented Design
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Private methods, when used meaningfully, are a great tool for writing beautiful object oriented code. But as many other things in life, excess of private methods is bad, too!<br /><br />In my opinion, we use private methods to:<br /><br />1. &nbsp;isolate a block of code to be reused inside the class.<br />2. &nbsp;extract code from another method for code readability.<br /><br />Now, taking these two use cases in mind, here's an easy conclusion:<br /><blockquote>The lower the ratio of public to private methods, the harder it is to write unit tests since the "units" are potentially larger.</blockquote>I don't know if there is any rule of thumb, but you will smell it when you see your unit tests require a lot of setup and assertions. Here's a code example from the Play! framework, an MVC franework for Java developers.<br /><br /><a href="https://github.com/playframework/play/blob/925a0676148f6cb149350f899a60d934544ab61a/framework/src/play/mvc/ActionInvoker.java">ActionInvoker.java </a><br /><br />You will see there are public methods with 100+ lines. I hope you agree with me:<br /><blockquote>"The ActionInvoker.java code is not readable"</blockquote>For the sake of readability, introducing private methods with good names would help. However, that doesn't eliminate any of&nbsp;the possible code paths from the public methods. So, if you are lucky, you will see really long unit tests with complex setup conditions and mock expectations. Otherwise, there will be no tests at all! Without any tests for such long and complex methods, use them at your own risk. I won't :(<br /><br /><span class="Apple-style-span" style="color: #666666;">Disclaimer: I like the play! framework a lot. However, if you take a look at their code and if you think unit testing is important, you'll see they have a lot of rooms for improvement with simple</span> <a href="http://books.google.ca/books?id=1MsETFPD3I0C&amp;pg=PA110&amp;lpg=PA110&amp;dq=extract+method+martin+fowler&amp;source=bl&amp;ots=pLM4p0UCef&amp;sig=5nCPhEPwBkNULvuHiOF1jiW1qqk&amp;hl=en&amp;ei=Jrt4TqjZCoK80AG4nbDlDA&amp;sa=X&amp;oi=book_result&amp;ct=result&amp;resnum=6&amp;ved=0CEUQ6AEwBQ#v=onepage&amp;q=extract%20method%20martin%20fowler&amp;f=false">extract method</a> <span class="Apple-style-span" style="color: #666666;">refactoring.</span></div></div>
