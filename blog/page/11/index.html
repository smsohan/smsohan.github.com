
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sohan's Blog</title>
  <meta name="author" content="SM Sohan">

  
  <meta name="description" content="Modules in Ruby are like classes with a few important differences. One of the differences is, a module cannot inherit from another module using the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://smsohan.com/blog/page/11/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="" rel="alternate" title="Sohan's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37549931-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Sohan's Blog</a></h1>
  
    <h2>Things I'm Learning</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:smsohan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/home">Home</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/lifeline">Lifeline!</a></li>
  <li><a href="/blog/2013/04/05/call-me-sohan-and-ask-me-not-about-sm/">Call me Sohan!</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/16/how-to-extend-ruby-module/">How to Extend a Ruby Module?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-16T00:00:00-06:00" pubdate data-updated="true">Sep 16<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Modules in Ruby are like classes with a few important differences. One of the differences is, a module cannot inherit from another module using the same syntax as class inheritance. However, its pretty easy to inherit a module&#8217;s method into another module, by just using the include ModuleToInclude syntax. Here&#8217;s an example if you are looking for one:<br /></div><br /><script src="https://gist.github.com/1223271.js"> </script></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/15/should-you-unit-test-interaction-with/">Should You Unit Test Interaction With Static Methods?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-15T00:00:00-06:00" pubdate data-updated="true">Aug 15<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on">No. You should not. Here&#8217;s an example:</div><br /><script src="https://gist.github.com/1147225.js">
  
 </script></div><br />If you are somehow mocking this static method, you are potentially making it dangerous for other places where this static method is used. Eventually, this will create red test results that are hard to find and make your tests dependent on each other.<br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/12/how-to-list-all-classes-that-include/">How to List All Classes That Include a Module?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-12T00:00:00-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on">Here&#8217;s the code:</div><script src="https://gist.github.com/1142228.js">
  
 </script></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/09/should-you-unit-test-methods-with-lot/">Should You Unit Test Methods With a Lot of Mocking?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-09T00:00:00-06:00" pubdate data-updated="true">Aug 9<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Well, anytime you have a lot of mocking, it is probably a smell. Particularly, a first smell is violation of the <a href="http://en.wikipedia.org/wiki/Law_of_Demeter">law of demeter</a>. However, we were having discussion about whether or not we should write unit test for something like the following example:<br /><br /><script src="https://gist.github.com/1136189.js">
  
 </script><br /><br />As you can see, this method actually does a quite important task. It invokes the search method with specific parameters that will determine your search results. Now, we were debating whether or not the example unit test actually brings any value.<br /><br />Here&#8217;s what we have discussed:<br /><b>Pros:</b><br />It confirms that you are actually calling the third party method with the right parameter.<br /><b>Cons:</b><br />The test is too tightly coupled with the implementation, so it will break if something changes inside the method irrespective of its actual output.<br /><br />But we failed to come to an unanimous decision on its usefulness. We all agreed on the point that it definitely needed some integration tests to make sure the search had actually worked.<br /><br />Here are two questions for you:<br /><br /><ol style="text-align: left;"><li>Would you skip the unit test altogether for this method and rely completely on an integration test? Why/Why not?</li>
 <li>If you are to rewrite this code, how would you write this using TDD?</li>
 </ol><br />Looking forward to see your input on this!<br /><br /></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Isa Goksu</div>
<div class='content'>
The first question actually has two aspects. It has a design part, and an implementation part. You have to judge which part we are doing here since you know the actual work there. If it is a design side, you write an integration or a functional test to find out whether wiring is done correctly or not. If it is on the implementation side, you have to write a unit test that verifies the behaviour.<br /><br />What I see from just a little code snippet here is basically you are creating a wrapper/facade for the library, or a delegate or even an anti-corruption layer kinda something. And your wrapper object is basically created in such a way that it looks like a Humble Object (http://xunitpatterns.com/Humble%20Object.html). Therefore I&#39;d go for integration test. If the team you are working on is a distributed team, then you might have some trust and/or communication issues, therefore writing an additional unit test wouldn&#39;t hurt. Then again that&#39;s not necessary.<br /><br />Main thing here is to understand that TDD won&#39;t tell you that you have write unit tests all the time. What TDD say is have a coverage before you operate, and drive your design with this mentality. One thing I like in Ruby community is that they do focus on Specs rather than focusing on unit/integration/functional tests differences. A tool like RSpec or Cucumber is even designed in such a way that they give you tagging support which you can easily mark your test with #requiresDB, #requiresFileAccess, #opensBrowser, etc.. And then you can create multiple builds by using these tags to have prioritized test suites.<br /><br />Second question is probably an obvious one. If I were to re-write using TDD, I&#39;d probably end up having an anti-corruption layer to the library which is designed 1:1 from the actual library, hence not need to be unit tested.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/05/ruby-present-method-with-unless/">Ruby Present? Method</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-05T00:00:00-06:00" pubdate data-updated="true">Aug 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Ruby has a nice little keyword called unless, that checks the opposite of if. So, you are probably used to a code like this:<br /><br /><pre lang="ruby">return customer.first_name unless customer.nil?<br /></pre><br />If you haven&#8217;t used present? before, you can in fact turn the above unless into a more familiar and easy to understand if statement:<br /><br /><pre lang="ruby">return customer.first_name if customer.present?<br /></pre><br />So, in most cases when you are using unless with a negative condition, you can use present? and if instead. I find it way easier to read.<br /><br />present? does the opposite of blank?. So, you will get the following:<br /><br /><pre lang="ruby">nil.present? #=&gt; false<br />[].present? #=&gt; false<br />"hello".present? =&gt; true<br />["a"].present? #=&gt; true<br /></pre>Hope it helps!</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
Yes, you are right.</div>
</div>
<div class='comment'>
<div class='author'>michaelkoper</div>
<div class='content'>
So far as i know is present? not a Ruby method but a Ruby on Rails method. http://api.rubyonrails.org/classes/Object.html#method-i-present-3F<br /><br />.zero? is indeed a ruby method.</div>
</div>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
Yap, you can do my_integer.zero? instead of my_integer == 0<br /><br />or my_integer.nonzero?</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
Is there an equivalent for zero? ?<br />Except for != 0 of course&#8230;</div>
</div>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
Thanks Ashif!</div>
</div>
<div class='comment'>
<div class='author'>Ashif Manjur</div>
<div class='content'>
Yes, I often halt at whether I am doing it wright anytime I use &#39;unless&#39; in any condition. Its much more easier to read if I use &#39;if&#39;. Thanks for this short but useful post&#8230;</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/26/should-you-write-unit-tests-for/">Constructors Are Methods, Too!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-26T00:00:00-06:00" pubdate data-updated="true">Jul 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><br />Yes, if your constructor does something meaningful. This is just like another method and should be treated equally for unit testsing purpose. Here&#8217;s an example that should need unit test:<br /><script src="https://gist.github.com/1107355.js">  </script><br />It looks simple, so testing it should be simple, too. I would only skip the default constuctors, as long as they don&#8217;t do anything interesting.</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Alexander Beletsky</div>
<div class='content'>
Sure, the constructors are methods too.. but they should not do anything more except internal initialization.<br /><br />I had a little habbit to put additional logic inside constructor, to be possible to write something like<br /><br />= new DoSomethingClass(x, y);<br /><br />I&#39;m getting rid of that also because of bad testability. Instead of that I write now:<br /><br />var smth = new DoSomethingClass(x, y);<br />smth.DoIt();</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/22/how-to-annoy-your-customer-learn-from/">How to Annoy Your Customers? Learn From GoDaddy Account Status Email</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-22T00:00:00-06:00" pubdate data-updated="true">Jul 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-0DN9O0Y4w3I/TinJW3lhP5I/AAAAAAAAAVw/Xn2pmjJjXbE/s1600/Screenshot-1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="560" src="http://3.bp.blogspot.com/-0DN9O0Y4w3I/TinJW3lhP5I/AAAAAAAAAVw/Xn2pmjJjXbE/s640/Screenshot-1.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Just looking at this screenshot alone, what do you think it is?</td></tr></tbody></table>I have a few domains registered with GoDaddy. I went with them, because at that time, I didn&#8217;t know of another renowned provider. But they have always been the best of producing the most confusing ever user interface. The account status email is one step ahead in that same direction.<br /><br />This is how it starts:<br /><br />At the top right corner, it says July 2011, in grayed out font! A deliberate attempt to de-emphasize the statement period!<br /><br />Just below the date, there is a fake input box and a button labeled Go. This is an image and if you click it, it will actually open a new page instead of asking for user input right inside the search box. This is just following the theory of most surprise (as opposed to <a href="http://en.wikipedia.org/wiki/Principle_of_least_astonishment">principle of least surprise</a>)!<br /><br />Next, in red background, they welcome me by saying, Welcome, S. M. Sohan! Customer Number: ### wtf? Customer Number? Do I give a shit what my customer number is? Why is the welcome grouped together with search and contact? How are these related?<br /><br />Then it says, Log in to your account on <b>our secure website</b> to view <b>your most recent account</b> statement. What does this mean? Does it mean, this statement is not recent? Is this not secure?<br /><br />Then it says, Summary of your account as of 7/21/2011<b>**</b>. That f&#8217;ing footnote will tell you that, the information may not reflect recent changes! What? Is this good enough till 7/21? If not, why do you even send this bullshit to me?<br /><br />Then it has 4 boxes side by side. The first one, <b>Messages</b> has Alerts: No, Notification(s): Yes. <b>View now</b> is a button to their site. How stupid is this? Why bother saying alerts &#8220;No&#8221;? If you know I have notifications, why not put it right here? Why are you confused about notification&#8221;(s)&#8221; - you should know if its just one (notification) or more (notifications). How lazy is that?<br /><br />Items Expiring is the other funny one. It says, Domain names: No. Then it says renew now. What? You&#8217;re saying nothing is expiring. Why on earth I would renew something?<br /><br />Then it takes almost 50% of the screen for asking me to contact with them through a number of channels including Facebook. Really? Facebook fan of GoDaddy? Crazy people!<br /><br />In the end, they don&#8217;t care putting a note of thanks, let alone personalize it with the name of an actual person. Isn&#8217;t it rude to end an email this way?<br /><br />Now, with all these hammerings - as if it fell short of creating enough fun, it says, More for You: followed by tens of fine print links to things that don&#8217;t matter at all to me. Oh boy! you are awesome!<br /><br />I am not a designer by any means. However, I think, even I can design a better version than this crap. Here&#8217;s my version in a screen mockup.<br /><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-T-ySiJT4c-s/TinOUi2YfRI/AAAAAAAAAV0/zXKeZxR2wIM/s1600/Screenshot-2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="330" src="http://2.bp.blogspot.com/-T-ySiJT4c-s/TinOUi2YfRI/AAAAAAAAAV0/zXKeZxR2wIM/s400/Screenshot-2.png" width="400" /></a></div><br /><br /><br /><br /><br /></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/11/avoid-duplication-in-config-files/">Avoid Duplication in Config Files</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-11T00:00:00-06:00" pubdate data-updated="true">Jul 11<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Any kind of configuration file, be it an ugly xml file or a prettier yml or properties file, its been a source of frustration to me. Here&#8217;s a list of few such pain points:<br /><br /><ol><li>There are two config keys that point to the same value. e.g. db_username=master, data_source_user=master</li><li>There are two config keys for urls that point to the same domain, but different paths. e.g. market.com/cameras and market.com/undies</li><li>Config entries with placeholders. e.g. weather_url= weather.com/%s or weather_url= weather.com/%s/hourly</li><li>Config entries with default values that should not default to anything.</li><li>Config entries that are required but don&#8217;t fail the application deployment when not set.</li></ol><br />Are you having to deal with similar pain points? Some more?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/25/how-not-to-provide-feedback-when-doing/">How Not to Provide Feedback When Doing Code Review</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-25T00:00:00-06:00" pubdate data-updated="true">Jun 25<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Code review, as any other review process, can often be an attack on someone&#8217;s ego and incite anger and frustration. Being both on sending and receiving end of such code reviews for years, I have learned a few how-not-to-do-it, or as one might say, anti-patterns of providing code review feedback. Let me know if you agree/disagree with me on the following:<br /><ul style="text-align: left;"><li>You are always reviewing Adam&#8217;s code while Adam is never reviewing yours.</li><li>Your feedback is like &#8220;Adam, <b>you should</b> break down part of this method into a private method&#8221; instead of &#8221;<b>we can probably</b> extract a part of&#8230;&#8221;</li><li>You are always suggesting, for example &#8221;<b>we should do</b> x and y and z&#8221;, instead of asking interesting questions &#8221;<b>can we</b> do x? <b>what if</b> we did y?&#8221; </li></ul></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/22/service-api-and-exceptions/">Service API and Exceptions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-22T00:00:00-06:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><br />Too often I see I am using a REST/SOAP API to talk to a third party system that frustrates me because of poor error messaging. Here&#8217;s an example to illustrate a typical frustration:<br /><br />Call: city_service.update_residence_address(city_dueler, new_address)<br />Response: &lt;status&gt;Failed&lt;/status&gt;&lt;error&gt;Invalid address&lt;/error&gt;<br /><br />But the address just seems right to me. So, I need to know specific reason about why the address is wrong. The error message leaves this critical detail. What happens next is, I look for the log files created by the city_service, conceptually supposed to be a third party hosted service. To do this, I SSH to the server, then cd to the logs folder and get lost in many of the cryptic log files. Then eventually I find a log and if I am lucky, I find something like the following:<br /><br />InvalidAddressException at:&#8230;<br />&#8230;<br />Street number is not listed..<br />&#8230;<br /><br />Now, I know I had an issue with the streer number. But I can see this only after I looked into the log of the thirdparty server. In an ideal case, I don&#8217;t have an access to their server. Even if I have it, I cannot easily understand their logs and stack traces! In most API calls to third party applications I have had this&nbsp;frustration&nbsp;to varying degrees.<br /><br /><b>Here&#8217;s a lesson learned:</b><br />Next time you expose an API for another app, expose error messages as specific as possible - so that, no details is left buried into your log files.</div></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/12/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/10/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2020/12/24/you-are-unfrogettable/">&#8220;you&#8217;re unfrogettable&#8221;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/12/07/tribute-to-rails-date-time-great-invisible-design/">A Tribute to Time Travel APIs in Ruby on Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/28/tips-for-developer-demos/">Tips for Great Developer Demos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/18/where-to-learn/">Where to Learn: 10 Ways I Do</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/12/learn-to-get-and-give-feedback/">Learn to Get and Give Feedback</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>LinkedIn Profile</h1>
  <p>
    <a href="http://www.linkedin.com/in/sohan">SM Sohan</a>
  </p>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/smsohan">@smsohan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'smsohan',
            count: ,
            skip_forks: ,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2020 - SM Sohan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
