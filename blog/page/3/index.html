
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sohan's Blog</title>
  <meta name="author" content="SM Sohan">

  
  <meta name="description" content="Gone are the days when I used to go to a ton of local developer meetups. After Polyglot YYC, this was the second conference I joined this year. This &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://smsohan.com/blog/page/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="" rel="alternate" title="Sohan's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37549931-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Sohan's Blog</a></h1>
  
    <h2>Things I'm Learning</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:smsohan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/home">Home</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/lifeline">Lifeline!</a></li>
  <li><a href="/blog/2013/04/05/call-me-sohan-and-ask-me-not-about-sm/">Call me Sohan!</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/09/23/notes-from-the-voxxeddays-banff/">Notes From the VoxxedDays Banff, 2019</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-09-23T15:10:00-06:00" pubdate data-updated="true">Sep 23<span>rd</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/voxxed_banff.png" alt="VoxxedDaysBanff2019" /></p>

<p>Gone are the days when I used to go to a ton of local developer meetups. After <a href="/blog/2019/06/05/polyglot-yyc-2019-my-first-unconference/">Polyglot YYC</a>, this was the second conference I joined this year. This was a 50/50 event for me in terms of like vs. dislike. Here goes my notes:</p>

<p>Ix-Chel Ruiz presented the keynote to start the day. Her storytelling style reminded me of WWII movies, where a lot of cloudy and gloomy scene keep getting darker and darker, ending with a deep sense of sadness. Ix-Chel used quotes from the likes of <a href="https://en.wikipedia.org/wiki/Scott_Galloway_(professor)">Prof. Galloway</a> and Elon Musk to tell a story about how the modern tech is creeping into our private lives. I wish she had prepared for the keynote a little better. She paced it so slowly yet ran out of the material half-way through the slot. In a way I liked the early finish because I just wanted to feel optimistic about the future.</p>

<p>The stunning view of Banff landscape brightened up the mood a bit:</p>

<p><img src="/images/banff.jpg" alt="banff" /></p>

<p>There were 4 other talks on the same day and I liked the talk on <a href="https://vuejs.org">Vue.js</a> and <a href="https://vuetifyjs.com/en/">Vuetify</a> by <a href="https://www.davepaquette.com">Dave Paquette</a>. Since, I use VueJS at work, it was easier to relate to. Dave showed us how he&#8217;s using Vue.js to render a real-time collaborative UI for complex seating requirements at <a href="https://www.flyovercanada.com">FlyOver Canada</a>.</p>

<p>Among other talks, there was one on data management for machine learning and another one on Kotlin, I liked these  talks but didn&#8217;t fully relate with the topics.</p>

<p>There was a talk on using Kafka for geo-fencing applications. The presenter could&#8217;ve spent more time on the parts of kafka that makes it a compelling case for using in geo-fencing applications. Instead, he delved into the code, java, and jar files.</p>

<p>There was another talk on using <a href="https://eventstore.org">EventStore</a> for event sourcing. The presenters set the story saying that they had an opportunity to try new technologies while rewriting a &#8220;monolithic&#8221; application and they used EventStore with &#8220;multi-services&#8221; to implement it so it&#8217;s easier to evolve the system. I&#8217;d love to see some evidence of the desired outcome, that&#8217;d be motivating. But in the end it was about the &#8220;how&#8221; instead of the &#8220;why&#8221;.</p>

<p>One thing to note is, even for talks that could be more engaging, I still learned quite a few new things.</p>

<p>Beyond the talks, I like going to conferences as it opens the opportunity to meet new people and some known faces. In hindsight, had I known about this event before the talks were finalized, we&#8217;d have submitted a few proposals from Cisco. Looking forward to the next round for an opportunity to share some innovative work we&#8217;re doing at Cisco.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/08/13/what-we-learned-about-feature-flag-in-five-years/">What We Learned About Feature Flags in Five Years</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-08-13T21:56:00-06:00" pubdate data-updated="true">Aug 13<span>th</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Looking at our git logs from <a href="https://www.cisco.com/c/en/us/products/security/amp-for-endpoints/index.html">Cisco AMP for Endpoints</a> Console, I see that we introduced feature flags back in January, 2014. The reason I got interested in it is because even after all these years of use, today I had to build a new concept on our feature flag code. If you&#8217;re already using feature flags or thinking about adding feature flags to your project, this experience report may be helpful.</p>

<p><img src="/images/switchboard.jpg" alt="switchboard" /></p>

<p><small>
Photo credits to <a href="https://flic.kr/p/9yJU3j">Michael Newton</a>
</small></p>

<p>Back in 2014, we were growing as a team, but wanted to keep working on a single shared code. We perceived  that the productivity gain of multiple teams working on a shared code would outweigh cross-team dependency issues. As we started working on multiple features in parallel, mostly independent with different release dates, we saw unfinished work on one feature was blocking the release of a completed one. After some research, we decided to introduce feature flags in our code.</p>

<p>First, we read <a href="https://martinfowler.com/bliki/FeatureToggle.html">Martin Fowler&#8217;s</a> article on this topic as a guideline. Today, <strong>we have 195 feature flags in production</strong>. Over time, we have extended the use of feature flags with new concepts and I wanted to document it here for everyone. Fowler&#8217;s blog also published a more <a href="https://martinfowler.com/articles/feature-toggles.html">detailed and updated post</a> later. The taxomony used here is different from Fowler&#8217;s because I find the following to be more relevant for our product.</p>

<ol>
<li><strong>Database stored</strong>: We store the feature flags in the main database so that the features can be toggled without needing a code deployment.</li>
<li><strong>Cached</strong>: Feature flag lookups are cached for performance.</li>
<li><strong>Temporary vs. permanent</strong>: We mark some feature flags as temporary when the primary goal is to incrementally release code to production. Temporary feature flags are regularly cleaned once the feature is complete. 13/195 currently used feature flags are marked temporary.</li>
<li><strong>Self-serve</strong>: We tag some feature flags as self-serve where users need to opt-in to use the feature.</li>
<li><strong>Limited availability</strong>: For self-serve feature flags, we tag some features as limited availability. It allows us to release self-serve features to selected customers.</li>
<li><strong>Globally enabled</strong>: We have a mechanism to globally enable or disable a feature flag. 131/195 feature flags are currently marked globally enabled. This number varies by deployed environments.</li>
<li><strong>Enabled for all, but</strong>: We have a mechanism for enabling a feature flag for all but some specific targets.</li>
<li><strong>Multi-target</strong>: Sometimes we attach a single feature flag to multiple domain objects such as tenant, user, subscription tier, etc.</li>
<li><strong>Hierarchical</strong>: We use a fallback mechanism for feature check. For example, the check if a user have file upload permission, we check it for the specific user, then fall back to the tenant it belongs to, and finally fall back to the feature itself being globally enabled.</li>
<li><strong>Code generator</strong>: We use a single-command code generator to introduce a new feature flag to our code. It takes care of the database migration, seed entry, and code references.</li>
<li><strong>Circuit-breaker</strong>: For integration with external services, we&#8217;ve used feature flags as a circuit-breaker to gracefully handle third-party downtime.</li>
<li><strong>Environment-flags</strong>. We deploy the product to multiple geographic environments, including a private cloud model. Certain features behave differently based on the deployment. Using feature flags make it easy to develop and test such differences before deploying to each target environment.</li>
</ol>


<p>There are reusable libraries and services such as <a href="https://launchdarestkly.com">LaunchDarkly</a> that provide rich APIs and user interfaces for feature flags. At this point, even with all the aforementioned concepts, our custom implementation of feature flag is quite straight-forward and easy to evolve. It has been a key ingredient for our frequent iterative deployments with 6 teams working on diverse features in parallel on the same product.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/08/10/software-architecture-is-all-aboout-ugly-boxes-and-lines/">Software Architecture Is All About Ugly Boxes and Lines - My Wishlist</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-08-10T20:28:00-06:00" pubdate data-updated="true">Aug 10<span>th</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In my last post, I claimed <a href="/blog/2019/08/02/all-talk-no-show-software-architecture/">software architecture is all talk and no show</a>. When we have a visible one, it&#8217;s a bunch of poorly drawn boxes and lines. I don&#8217;t have a problem with boxes or lines, but I do like beautiful drawings.</p>

<p>Despite many standards, we still mostly use  whiteboard drawing of boxes and lines for sharing software design as we build new systems or introduce new team members. Where it sucks is the lack of evolution and context of the rest of the system that&#8217;s not drawn on the board.</p>

<p>A digital repro of software architecture diagrams often happen in PowerPoint or similar tools that allow us to draw boxes and lines. This process is so rough that people just give up.</p>

<p>At work, I have been using <a href="http://www.websequencediagrams.com">WebSequenceDiagram</a>. While it&#8217;s still not an eye-candy, I like the fact that you can draw a diagram from using plain text. Consider this as an input to create the accompanying diagram:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>title Toilet Flush System
</span><span class='line'>User -&gt; Flush Lever: Push
</span><span class='line'>Flush Lever -&gt; Outlet Valve: Open
</span><span class='line'>Outlet Valve -&gt; Toilet Bowl: Water
</span><span class='line'>Outlet Valve -&gt; Inlet Valve: Open</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/Toilet_Flush_System.png" alt="Sequence Diagram" /></p>

<p>While this text to sequence diagram is a great achievement for a tool, I don&#8217;t see such tools for software architecture diagrams. Here&#8217;s my wishlist of features that I&#8217;d want in a software architecture tool:</p>

<ol>
<li><strong>Text input</strong>. Allows us to easily create the diagrams and use all the version control features.</li>
<li><strong>Map like UX</strong>: Allows us to easily transition between higher and lower level components.</li>
<li><strong>Beautiful</strong>.</li>
</ol>


<p>Do you know any? Do these requirements make sense?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/08/02/all-talk-no-show-software-architecture/">All Talk No Show: Software Architecture</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-08-02T08:46:00-06:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We have a problem with software architecture. Let&#8217;s face it. Find the architecture diagrams of the products you&#8217;re working on and answer these questions:</p>

<ol>
<li>Did you find it?</li>
<li>Does everyone in your team know where to find it?</li>
<li>Is it up-to-date?</li>
<li>Can you see how this system scales, handles failover, monitors performance, or how it&#8217;s secured?</li>
<li>Can you see how it evolved over time?</li>
<li>Can you train a new team-member using this diagram?</li>
</ol>


<p>This is the first micro-post of a series of such as I aim to build a compelling case for fundamentally changing software architecture diagrams.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/07/04/play-at-work/">Play at Work</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-07-04T16:03:00-06:00" pubdate data-updated="true">Jul 4<span>th</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/paper_plane.jpg" alt="paper plane" /></p>

<p><small>
Image source: <a href="https://www.flickr.com/photos/hgz/">Kalvis</a>
</small></p>

<p>&#8220;I am a mango&#8221;.</p>

<p>First, mangoes are in-season, and I still remember the
juicy sweetness of the mango I had just the night before. So, when the coach
asked each of us to be a fruit, I didn&#8217;t think twice. One of my
coworkers was a kiwi, another one apple, and so on. The idea was to
group us
by color, then by size. This got us, twenty people in the class, moving and engaged. It was part
of a two-day design thinking course. The coaches used the fruit game to
bring some energy into the room as well as to pave the way for the next
exercise - grouping a bunch of ideas by cost and the level of
innovation.</p>

<p>I find that professional trainers bring play at work, especially for
sessions that span hours or days. However, on a typical day to day
business, I don&#8217;t see much play activity at work. Hoping to bring in
some play activities to my work going forward. Here are some ideas for
play activities based on what I saw so far:</p>

<p>Paper planes: Having small groups build paper planes and the winner has
the most number of planes crossing a line.</p>

<p>Catch and throw: A ball or a ball-like object changing hands and the person
catching must find someone that didn&#8217;t catch it already.</p>

<p>Portrait: Everyone draws a portrait of another person looking at their
face without looking at the paper.</p>

<p>Quiz: An online quiz that maintains a leaderboard throughout a session.</p>

<p>Exercise: Getting everyone out of their seats to do a quick one-minute
exercise.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/06/27/internal-trainings/">Internal Trainings</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-06-27T13:31:00-06:00" pubdate data-updated="true">Jun 27<span>th</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/design_thinking.jpg" alt="design_thinking" /></p>

<p><small>
Design Thinking course, Cisco Calgary Office, AB, 2019
</small></p>

<p>One benefit of working at Cisco is access to the many learning and development resources. Our learning and development org arranges hundreds of courses throughout the year. Moreover, we have a reimbursement program for external courses, conferences, books, and subscriptions to online learning programs and publications.</p>

<p>In the past 6 years, I have immensely benefitted from these resources. Here&#8217;s a list of the learning resources I&#8217;ve used.</p>

<ol>
<li><a href="https://learning.oreilly.com">Safari books online</a>, aka O&#8217;Reilly learning: In the past 3 years, have taken 3 online trainings and 7 books on this platform so far.</li>
<li>Design thinking, 2019: A two-day course taught by consultants about how to apply the principles of design thinking to communicate and derive solutions to complex problems.</li>
<li>Mindfulness, 2019: A 5-week program taught by consultants, with one hour per week, where I learned about staying mindful and effective at work amid all the chaos that surrounds it.</li>
<li><a href="http://tufte.com">Tufte one-day course</a>, 2019: Attended a course taught by Edward Tufte on data visualization and learned about the principles that make compelling data visualization.</li>
<li><a href="https://www.sans.org/course/hacker-techniques-exploits-incident-handling">SANS incident response</a>, 2018: A packed week-long program where I learned to think like a hacker by learning about and then hacking some interesting vulnerabilities in systems.</li>
<li><a href="https://dcloud-cms.cisco.com/demo_news/cisco-r00tcamp-lab-v1">Cisco R00tcamp</a>, 2017: A packed week-long program where I learned hands-on pen-testing techniques to build more secure software.</li>
<li><a href="https://www.cisco.com/c/en/us/products/security/threat-hunting-workshop.html">Cisco threat-hunting</a>, 2017: A daylong course to find root case that triggered a security threat using integrated Cisco tools, including the product I build with our team.</li>
<li><a href="https://www.railsconf.com/2015/">RailsConf</a>, 2015: It was a big opportunity to meet the community and bring some of their practices in-house. For example, we started using <a href="https://www.bugsnag.com">BugSnag</a> after learning about it in the conference.</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/06/05/polyglot-yyc-2019-my-first-unconference/">Polyglot YYC 2019: My First Unconference</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-06-05T16:49:00-06:00" pubdate data-updated="true">Jun 5<span>th</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/polyglot_yyc.png" alt="polyglot_yyc" />
<sub>
Source: <a href="https://polyglotyyc.ca">Polyglot YYC</a>
</sub></p>

<p>This weekend I went to <a href="https://polyglotyyc.ca">Polyglot YYC 2019</a>.
It&#8217;s a gathering of tech people from around Calgary. The event was open
to all possible topics, hence the name Polyglot.
It was the first unconference style meetup I went to and this post
is a summary of my day.</p>

<p>About the attendees, I don&#8217;t have the official count, but I imagine there were
close to a hundred people. Quite a few
people represented the sponsor companies. The sponsors
advertised for hiring new employees, mostly software engineers. On the
other hand, I met a few people who joined this venue to talk to prospective employers.
Some of the attendees were enrolled in a coding bootcamp to switch
careers. I was quite happy to see the community praising their enthusiasm towards the bootcampers.
Moreover, I met a few regular tech meetup people after a long time. I used to go to
all tech meetups I could find in town before having kids, and I felt
great to be among the self-motivated crowd after a long break.</p>

<p>About the event, I was fascinated by how the unconference took its shape.
At check-in time, everyone got a couple of forms to write down topics
of interest, either as a host or a participant. Everyone could vote for five
such topics. I didn&#8217;t prepare
beforehand. So, I put up a topic that I&#8217;m presently curios about, &#8220;Writing for Developers&#8221;.
A handful of people voted for me, but it didn&#8217;t make the cut. I found
some ideas better than mine and was happy that those got
voted to the top. In hindsight, I should&#8217;ve proposed the topic of &#8220;Why
Are You Not Innovating?&#8221;. I did an internal presentation on this topic
at Cisco and it was generally praised by my colleagues.</p>

<p>My other observation is, between technical and soft-skill related
topics, I liked the soft-skill ones better. For example, I found the topics on hiring,
choosing a technical vs. managerial career path to be more interesting than
the topics such as GraphQL and ReactJS. A few years ago, I&#8217;d
just choose the technical topics without thinking twice. This is also a
pattern in my recent blog posts or reading list.</p>

<p>In the hiring session, I saw a positive attitude towards hiring remotes
and treating them as equals. This is a major mindset shift among the
community.</p>

<p>In the individual contributor vs. management career path session, the
attendee list included both kinds as well as people that had transitioned in either
direction. The one take home message I got from this session was, when
confused with career choice, individual contributors and managers should take the step to
switch roles. And if things don&#8217;t work out, it&#8217;s totally possible
to revert later.</p>

<p>I&#8217;m looking forward to the 2020 edition of this event and may even prepare to
come up with a good idea for the unconference. If you can, please
join us for the next round.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/05/29/microsoft-word-vs-apple-pages/">Micro Design Critic: Microsoft Word vs. Apple Pages</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-05-29T10:44:00-06:00" pubdate data-updated="true">May 29<span>th</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/WordsVsPages.png" alt="MsWordVsApplePages" />
Showing a Screenshot of Microsoft Word for Mac and Apple Pages</p>

<p>This is what you get by default when you open a blank document on both editors.
I love that Apple Pages puts a deep focus on the content. If you haven&#8217;t used it, I&#8217;d
recommend trying it out. I know Microsoft Word has a known face, so
you&#8217;re likely used to all the distractions that sorrounds the content.
But, if you can, give Apple Pages a try.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/05/23/exception-handling-anti-patterns/">Exception Handling Anti-patterns</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-05-23T10:25:00-06:00" pubdate data-updated="true">May 23<span>rd</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/confusing_road_sign.jpg" alt="confusing road sign" /></p>

<p><sub>
Source: <a href="https://www.flickr.com/photos/foilman/2803261256/in/photolist-5gHrUC-5YEVYt-ocZHz7-2bDb3w8-aCGGSo-cB9opW-dUUDRS-6qbnVw-ppkgWu-cYsKjw-4HSS8t-aAJCk5-XBWQ5q-cYsKDA-NNefT4-p8HF-bfJwPB-6SibT9-ubSQL-mvaYX-7uNS7V-473w41-HABo5-5SL6FL-2f4rrkN-SazHLx-2eaMrNW-2eaMsbQ-24J1WkB-24CQREz-24CQR5g-bvyvt7-RvjAiK-6asxLk-9zRJ1e-6zLy6Z-9yuCpf-24FpgMX-95dVq3-hERZkd-4JKe8s-hESYoP-hESYnX-4oPtJ8-6gvogb-5skgvk-4Pu7Hp-8AmdYp-2t55t-24FpgYt">Henry Burrows</a>
</sub></p>

<p>Whenever faced with a production issue, I find exceptions to be an extremely useful
information source. A careful look at an
exeption has often led to quick discovery
of the source of a trouble. On the flip side, I have also
faced a lot of chaotic debugging sessions because of poor exception handling.
Here, I present the common anti-patterns that I recommend fixing while
reviewing pull-requests. Most programmers are already familiar with the mechanics of exception
handling. Yet, I see these anti-patterns everyday.</p>

<p>I primarily see these anti-patterns to be control-flow or logging related as shown below:</p>

<h2>Control-flow Anti-patterns</h2>

<p><strong>Unhandled.</strong> When an exception is unhandled, if often results in a
clueless user experience for the end user as well as the developer.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">notify</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">email!</span> <span class="c1">#May fail due to configuration, network, or authentication</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Catch-all.</strong> With catch-all errors, it&#8217;s often difficult to quickly detect the
original problem. For the same reason, the end users don&#8217;t get specific
and actionable error messages.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">save!</span> <span class="c1">#May fail due to database issues</span>
</span><span class='line'><span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">error</span>
</span><span class='line'>  <span class="c1"># handle</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>If-else Exceptions.</strong> Exceptions mean something unexpected took
place. If-else is used for logical known code paths. For example, when
accepting an API request, invalid input data is often a known logical
path. Using exceptions for it will trigger false alarms.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">save!</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">ValidationError</span> <span class="o">=&gt;</span> <span class="n">error</span>
</span><span class='line'>  <span class="n">log_exception</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Wrapped Exception.</strong> A new exception is raised hiding the original exception. In such cases,
if the exception is handled by the caller, <strong>critical context information
is lost</strong> since the orignal stacktrace is no longer available.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">save!</span> <span class="c1">#May fail due to database issues</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">SaveError</span> <span class="o">=&gt;</span> <span class="n">error</span>
</span><span class='line'>  <span class="k">raise</span> <span class="no">CustomSaveError</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;Failed to save the post&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Useless Custom Exception.</strong> Introducing a new exception type when a pre-defined exception suits just
fine.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">text</span><span class="p">:)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="kp">nil</span>
</span><span class='line'>    <span class="c1">#Could just use pre-defined ArgumentError</span>
</span><span class='line'>    <span class="k">raise</span> <span class="no">EmptyTextException</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Text can&#39;t be empty&quot;</span><span class="p">)</span>   <span class="k">end</span>
</span><span class='line'>  <span class="c1">#...</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Leaky Handler.</strong> Handling an error without cleaning system resources such as file
handles, open network connections, can cause cascading system outage.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="c1">#Will leak this file handle if read succeeds, but write fails</span>
</span><span class='line'>  <span class="n">file</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/some/new.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;some text&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">FileNotFoundError</span><span class="p">,</span> <span class="no">FileSaveError</span> <span class="o">=&gt;</span> <span class="n">error</span>
</span><span class='line'>  <span class="n">log</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">raise</span> <span class="n">error</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Logging Anti-Patterns</h2>

<p><strong>Silent Handler.</strong> Makes it very difficult to debug problems.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">save!</span> <span class="c1">#May fail due to database issues</span>
</span><span class='line'><span class="k">rescue</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Debug-only Handler.</strong> Similar to silent handler since most production apps run in non-debug
log level.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">save!</span> <span class="c1">#May fail due to database issues</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">SaveError</span> <span class="o">=&gt;</span> <span class="n">error</span>
</span><span class='line'>  <span class="n">log</span><span class="o">.</span><span class="n">debug</span> <span class="s2">&quot;failed to save post </span><span class="si">#{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">error</span><span class="o">.</span><span class="n">backtrace</span><span class="o">.</span><span class="n">join</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Custom Message-only Handler.</strong> Some exception handlers only log a custom
message leaving the details of the exceptions. As a result, critical
information is lost that can be very useful for debugging.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">save!</span> <span class="c1">#May fail due to database issues</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">SaveError</span>
</span><span class='line'>  <span class="n">log</span><span class="o">.</span><span class="n">warn</span> <span class="s2">&quot;failed to save post&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Message-only Handler.</strong> Without Stacktrace, it gets very difficult to trace the root of a
problem since often times exception handlers wrap a few lines of code.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">email</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">email</span>
</span><span class='line'>  <span class="n">post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="n">comment</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">create!</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">NotFoundError</span> <span class="o">=&gt;</span> <span class="n">error</span> <span class="c1"># Could happen in line 2 or 4</span>
</span><span class='line'>  <span class="n">log</span><span class="o">.</span><span class="n">warn</span> <span class="s2">&quot;failed to save post </span><span class="si">#{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Sneaky Handler.</strong> Some exception handlers return nil or a value.
The caller can&#8217;t distinguish between a successful vs. exception case and
fails in subsequent steps.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">save!</span> <span class="c1">#May fail due to database issues</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">SaveError</span> <span class="o">=&gt;</span> <span class="n">error</span>
</span><span class='line'>  <span class="n">log</span><span class="o">.</span><span class="n">warn</span> <span class="s2">&quot;failed to save post </span><span class="si">#{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">error</span><span class="o">.</span><span class="n">backtrace</span><span class="o">.</span><span class="n">join</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">null</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are times when you intentionally have to use some of these
anti-patterns. But those are rare. It&#8217;s critical for the developers to
think about the information that&#8217;d help in swiftly debugging a production problem. As such,
developers must avoid the noise and provide all context information for
errors to help diagnose potential system problems.</p>

<p>Happy coding.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/04/11/ah/">“Ah, How Good It Is to Be Among People Who Are Reading.”</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2019-04-11T15:29:00-06:00" pubdate data-updated="true">Apr 11<span>th</span>, 2019</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Rainer Maria Rilke</p></blockquote>

<p>All creators take a deep interest in the creations of others. All
filmmakers watch a lot of movies, all good writers are also the most
prolific readers, all artists can talk at length about the smallest
pieces of art they have seen.</p>

<p>We, software developers, if we want to claim ourselves as the artists of
this craft, we must be prolific readers of code. There&#8217;s been no better
time as today. We have immediate access to millions of lines of carefully
written code out there in the internet. Just like artists of any craft,
I&#8217;ve had so much fun spending time with my fellow developers that read
code for the pure joy of learning something new.</p>

<p>Just had so much fun reading <a href="https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/array/inquiry.rb">this ruby</a>
code today from the Ruby on Rails project:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Array</span>
</span><span class='line'>  <span class="c1"># Wraps the array in an +ArrayInquirer+ object, which gives a friendlier way</span>
</span><span class='line'>  <span class="c1"># to check its string-like contents.</span>
</span><span class='line'>  <span class="c1">#</span>
</span><span class='line'>  <span class="c1">#   pets = [:cat, :dog].inquiry</span>
</span><span class='line'>  <span class="c1">#</span>
</span><span class='line'>  <span class="c1">#   pets.cat?     # =&gt; true</span>
</span><span class='line'>  <span class="c1">#   pets.ferret?  # =&gt; false</span>
</span><span class='line'>  <span class="c1">#</span>
</span><span class='line'>  <span class="c1">#   pets.any?(:cat, :ferret)  # =&gt; true</span>
</span><span class='line'>  <span class="c1">#   pets.any?(:ferret, :alligator)  # =&gt; false</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">inquiry</span>
</span><span class='line'>    <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">ArrayInquirer</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The beautify of this rich API is an art. I love it. You may have
different opinions. But I hope you find your love of art in code.
There&#8217;s plenty of art in code out there for everyone to enjoy.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2021/02/19/frontend-engineering/">Can I Have a Career as a Frontend Engineer?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/01/17/software-architecture-part-3-writing/">Software Architecture - Topic 3: Writing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/01/16/what-drives-me/">What Drives Me?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/12/30/software-architecture-part-2-people/">Software Architecture - Topic 2: People</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/12/26/software-artchitecture-part-1/">Software Architecture - Topic 1: Delightfulness</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>LinkedIn Profile</h1>
  <p>
    <a href="http://www.linkedin.com/in/sohan">SM Sohan</a>
  </p>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/smsohan">@smsohan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'smsohan',
            count: ,
            skip_forks: ,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2021 - SM Sohan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
