
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sohan's Blog</title>
  <meta name="author" content="SM Sohan">

  
  <meta name="description" content="Naming conventions play an important role to the software&#8217;s overall architecture. It is not a rocket science, still, it may lead to unhappy &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://smsohan.com/blog/page/18/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="" rel="alternate" title="Sohan's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37549931-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Sohan's Blog</a></h1>
  
    <h2>Things I'm Learning</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:smsohan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/home">Home</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/lifeline">Lifeline!</a></li>
  <li><a href="/blog/2013/04/05/call-me-sohan-and-ask-me-not-about-sm/">Call me Sohan!</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/16/rails-modeling-guide2-naming-ruby-on/">Rails Modeling Guide#2: Naming Convention for Ruby on Rails Model Methods</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-16T00:00:00-07:00" pubdate data-updated="true">Jul 16<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>Naming conventions play an important role to the software&#8217;s overall architecture. It is not a rocket science, still, it may lead to unhappy consequences if not taken care of at the early stage of a project. This small best practices can make a code base significantly improved.</p> <p>Rails does a good job by using the dynamic power of ruby and providing with a handful of dynamic methods with the models. ActiveRecord::Base and its included modules follow a consistent naming, which clearly represent the intended purpose of the methods. At <a href="http://www.code71.com/" target="_blank">Code71</a>, we are working on <a href="http://www.scrumpad.com/" target="_blank">ScrumPad</a>, a 2nd generation agile scrum tool using ruby on rails and our model methods are named according to the following rules-</p> <p>1. All boolean returning methods end with &#8216;?&#8217;</p><pre class="brush: rails">company.billable?, sprint.current?, story.in_progress?</pre><p>2. Boolean methods do not start with is_ or has_ or did_ (as you might see in other popular languages)</p><pre class="brush: rails">company.is_billable? -&gt; company.billable?<br />sprint.is_current? -&gt; sprint.current?</pre><p>3. find_ and find_all are used only for class (self.find or self.find_all) methods and should return a single/array of object of the class respectively.</p><p>find_* methods may return a single object of the class/nil</p><p>find_all_* methods return an array of objects of the class or [], but never a nil</p><p>4. No methods start with a get_ as other languages.</p><p>5. A method ends with ! if it alters the object itself.</p><pre class="brush: rails">sprint.close!()<br />story.progress!()</pre><p>6. Methods that persists an object/may throw exception, should always end with ! (implied from rule 5)</p><pre class="brush: rails">invoice.update_status!(:paid)</pre><p>7. Always use parentheses &#8216;()&#8217; in method names. Future versions of ruby is deprecating the support for method names without parentheses.</p><p>Following these 7 simple rules we have consistent and intuitive model method names across the whole <a href="http://www.scrumpad.com/" target="_blank">ScrumPad</a>. Let me know if you have any suggestion to these names to make it even better.</p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
@Ashif, thanks!</div>
</div>
<div class='comment'>
<div class='author'>Ashif Manjur</div>
<div class='content'>
Thanks for these great tips. Sometimes only following the naming convention can save us a lot of time and effort to understand codes written by others. Keep posting such tips and tricks of beautiful coding.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/16/rails-modeling-guide1-right-structure/">Rails Modeling Guide#1: Right Structure of a Ruby on Rails Model</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-16T00:00:00-07:00" pubdate data-updated="true">Jul 16<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p> </p> <p><a href="http://lh6.ggpht.com/_Gr1ozXzBWpM/Sl8_GY9tjZI/AAAAAAAAAF4/mXyyvZf0TqE/s1600-h/30MAR4U%5B3%5D.jpg"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="273" alt="30MAR4U" src="http://lh4.ggpht.com/_Gr1ozXzBWpM/Sl8_KZGni7I/AAAAAAAAAF8/iPeKlLA9_j8/30MAR4U_thumb%5B1%5D.jpg?imgmax=800" width="105" border="0" /></a> </p> <p>Rails models are no exception compared to the super models! You are in the business if and only if you got a good physical structure and can stick to it for years&#8230;</p> <p>At <a href="http://www.code71.com/" target="_blank">Code71</a>, we are keeping our rails models attractive following a few guidelines. I will be posting these guidelines in a series and here goes the first one - about the physical structure of the ruby on rails models.</p> <p>We keep the following order consistent in our models:- </p><ol> <li>CONSTANTS</li> <li>has_one, has_many, belongs_to, has_and_belongs_to relations in dependency order</li> <li>plug-ins initialization (acts_as_tree, acts_as_state_machine etc.)</li> <li>validates_presence_of</li> <li>validates_uniqueness_of </li> <li>validates_numericality_of</li> <li>validates_format_of</li> <li>custom_validations</li> <li>named_scopes grouped by related purposes</li> <li>active record hooks (after_initialize, before_create, after_create, &#8230;) in execution order in the format (after_initialize [:assign_default_state, :sanitize_content] )</li> <li><strong>protected</strong></li> <li>hook method implementations according to execution order</li> <li><strong>public</strong></li> <li>constructor</li> <li>class methods in alphabetic order</li> <li>other methods alphabetically or grouped if related</li> <li><strong>protected</strong></li> <li>methods alphabetically or grouped if related</li> <li><strong>private</strong></li> <li>self methods in alphabetic order or similar methods in a group<br />other methods in alphabetic order or similar methods in a group<br /></li></ol> <p><strong><span style="color:#004000;">Rule</span></strong></p> <p>No method gets code real estate over 20 lines. If needed, one/more private methods are used.</p> <p><strong><span style="color:#004000;">How is this helping us?</span></strong></p> <ol> <li>We are absolutely sure where to look for a method or where to write a new method.</li> <li>The code base is really consistent.</li> <li>The unit test methods also follow the same order, which makes managing the test suite easy.</li></ol> <p>More to come later this week. Stay tuned!</p></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/07/implementing-breadcrumb-in-rails/">Implementing Breadcrumb in Rails Projects – a Clean Approach</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-07T00:00:00-07:00" pubdate data-updated="true">Jul 7<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p><a href="http://lh5.ggpht.com/_Gr1ozXzBWpM/SlQtUMgYMWI/AAAAAAAAAFw/T6ETdg1_psY/s1600-h/breadcrumb%5B3%5D.png"><img title="breadcrumb" style="border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="132" alt="breadcrumb" src="http://lh3.ggpht.com/_Gr1ozXzBWpM/SlQtVVnNvKI/AAAAAAAAAF0/WGq_a6xKgTk/breadcrumb_thumb%5B1%5D.png?imgmax=800" width="571" border="0" /></a> </p>  <p>In most web applications, breadcrumbs offer a nice way to trace back to previously visited pages. However, generating the breadcrumbs and showing them on dynamic pages sometimes need special care for the following reasons-</p>  <ol>   <li>The links of the breadcrumb may contain dynamic links. </li>    <li>It is used in all the pages. So, changing the breadcrumb may trigger a series of changes. </li> </ol>  <p>In <a href="http://scrumpad.com/" target="_blank">ScrumPad</a>, we are using ruby on rails. There are a few plugins to help rails projects in managing breadcrumbs, but none seemed to satisfy our need. In fact, most projects come up with some distinctive ways to generate the breadcrumbs. However, we kept the breadcrumb clean in the following way in <a href="http://scrumpad.com/" target="_blank">ScrumPad</a>.</p>  <p>Step#1:</p>  <p>Encapsulated the breadcrumb generation logic into a single class and used it from all places.</p>  <pre class="brush: rails">class Breadcrumb<br />include ActionView::Helpers::UrlHelper<br />include ActionView::Helpers::TagHelper<br />include ApplicationHelper<br /><br />attr_accessor :parts, :separator, :prefix<br /><br />def initialize(separator = nil, parts = [])<br />  self.separator = separator || "&lt;img src="\"/images/stub_arrow_right.gif\"" /&gt;"<br />  self.parts = parts<br />end<br /><br />def add(title, url = nil)<br />  self.parts &lt;&lt; {:title =&gt; title, :url =&gt; url}<br />end<br /><br />def set_prefix(title, url)<br />  self.prefix = {:title =&gt; title, :url =&gt; url}<br />end<br /><br />def to_s<br />  if(!self.parts.nil? and !self.parts.empty?)<br />    if(self.prefix.nil?)<br />      parts_with_prefix = self.parts<br />    else<br />      parts_with_prefix = [self.prefix] + self.parts<br />    end<br />  <br />    breadcrumb_html = []<br />    parts_with_prefix.each do |part|<br />      if(part[:url].nil? or part[:url].empty?)<br />        breadcrumb_html &lt;&lt; "<span>#{part[:title]}</span>"<br />      else<br />        breadcrumb_html &lt;&lt; link_to(part[:title], part[:url])<br />      end<br />    end<br />    return breadcrumb_html.join(" #{self.separator} ")<br />  end<br />  return ''<br />end<br />end</pre><p>Step#2:</p><p>A before_filter in the ActionController initializes the breadcrumb in the following way:-</p><pre class="brush: rails">def initialize_breadcrumb()<br />  @breadcrumb = Breadcrumb.new<br />  if(project_selected?)<br />    @breadcrumb.prefix = {:title =&gt; "Dashboard", :url =&gt; dashboard_project_path(selected_project())}<br />  end<br />end</pre><p>Step#3:</p><p>Now, @breadcrumb is available to all actions. However, if the RESTful resource definition is right, the rest of the breadcrumb generation becomes really simple. We have methods like the following in our controllers-</p><pre class="brush: rails">def generate_breadcrumb(sprint, story = nil)<br />  @breadcrumb.add(sprint.name, project_sprint_path(project.id, sprint.id))<br />  if(!story.nil?)<br />    @breadcrumb.add(story.display_title, story_path(story))<br />  elsif(self.action_name != 'index')<br />    @breadcrumb.add('Stories', stories_path())<br />  end<br /><br />  current_page = self.action_name == 'index' ? 'Stories' : self.action_name.humanize<br />  @breadcrumb.add(current_page)<br />end</pre><p>Step#4:</p><p>Finally, in my view layout, I just use this instance variable as shown here:-</p><pre class="brush: rails">&lt;%= @breadcrumb %&gt;</pre><p>So, the whole breadcrumb generation is encapsulated and the implementation is clean. Let me know if you liked it. I am in the process of creating a plugin so that anyone can just drop it in any rails app and start using straight away!</p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Jesse Cai (蔡望勤)</div>
<div class='content'>
very cool, will be a nice plugin.</div>
</div>
<div class='comment'>
<div class='author'>Samiron Paul</div>
<div class='content'>
This was really a cool way to implement breadcrumb in Rails. Looking forward for the plugin&#8230; as it really seems lifesaver for developers :)</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/15/lesson2-pace-your-sprint-rightly/">Lesson#2: Pace Your Sprint Rightly</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-15T00:00:00-07:00" pubdate data-updated="true">Jun 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>In my <a href="http://smsohan.blogspot.com/2009/06/lesson1-going-incremental-is-natural.html" target="_blank">previous post</a>, I said about being incremental. Here come the next thing, being “ITERATIVE”. A prefer the term Sprint than Iteration.</p>  <p>So, once you decided to take small increments, make sure you reach the targets sprinting.</p>  <p><a href="http://lh3.ggpht.com/_Gr1ozXzBWpM/SjX_DmKLDgI/AAAAAAAAAFo/xYRbI8rsbVI/s1600-h/sprint%5B3%5D.jpg"><img title="sprint" style="border-right: 0px; border-top: 0px; display: inline; border-left: 0px; border-bottom: 0px" height="260" alt="sprint" src="http://lh3.ggpht.com/_Gr1ozXzBWpM/SjX_EyH2GEI/AAAAAAAAAFs/c7e42WMAbEI/sprint_thumb%5B1%5D.jpg?imgmax=800" width="347" border="0" /></a> </p>  <p>I suggest you prepare for sprinting with the right techniques and tools. A few recommendations-</p>  <ol>   <li>Never miss a daily standup meeting. Spend only 2 minutes (or less) per person answering the three questions – what did you do yesterday, what’s on the plate for today and what is blocking the race?</li>    <li>Install visual clues for bringing the under the hood stuffs to daylight. Remember, being able to address the loopholes is the key. The solution usually follows automatically.</li> </ol>  <p>The key concept to internalize is, sprinting is a balance race. You need a good start and keep the momentum to reach the touch line on time. Its a small race and if you fall back, the touch line may seem too far to celebrate.</p>  <p>At Code71, <a href="http://scrumpad.com" target="_blank">ScrumPad</a>, is helping us in sprinting. Our sprints are two week sprints in most projects. We found the team communication holds a key in meeting the deadline. Since, within a sprint, someone of the team may need an unplanned vacation or an issue may arise out of the blue, the team needs to step up and put extra efforts. Again, visual clues help the team in keeping everybody posted timely.</p>  <p>If a team finds it difficult to meet the deadline and find the sprint length to be too small, then what? Should they linger the sprint length? NO. The solution is to even shorten the length. To make sure, the team can plan for short spans with better accuracy. Lingering the sprint length addresses the wrong disease and hence may not solve the problem.</p>  </div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Ashrafuzzaman</div>
<div class='content'>
I think 2 week sprint is a good sprint length and appropriate for most of the project.</div>
</div>
<div class='comment'>
<div class='author'>Ashrafuzzaman</div>
<div class='content'>
I think, two week sprint is a good sprint length and is appropriate for most of the projects.</div>
</div>
<div class='comment'>
<div class='author'>Tanvir Anowar</div>
<div class='content'>
I think for big projects and a big teams sprint lengths also should have to be big enough for a maximum outcome.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/03/lesson1-going-incremental-is-natural/">Lesson#1: Going Incremental Is Natural!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-03T00:00:00-07:00" pubdate data-updated="true">Jun 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>As Scrum and Agile processes tell you, do it in small sprints, 2 weeks preferably, and go incremental. Take a small piece at a time and sprint. </p>  <p><a href="http://lh3.ggpht.com/_Gr1ozXzBWpM/SidMvX7yttI/AAAAAAAAAFc/HvBvxUoFJdY/s1600-h/human-evolution-t10176%5B3%5D.jpg"><img title="human-evolution-t10176" style="border-right: 0px; border-top: 0px; display: inline; border-left: 0px; border-bottom: 0px" height="293" alt="human-evolution-t10176" src="http://lh4.ggpht.com/_Gr1ozXzBWpM/SidMx5T5PoI/AAAAAAAAAFg/0U5KZOhlt7c/human-evolution-t10176_thumb%5B1%5D.jpg?imgmax=800" width="407" border="0" /></a> </p>  <blockquote>   <p><em>I took this image from internet and credits to </em><a href="http://blogs.houstonpress.com/" target="_blank"><em>this site.</em></a></p> </blockquote>  <p>It’s easy to work out the Natural way than to defy it! If you are iterative and incremental, you are reaching towards the right hand side of the image! And to make the evolution faster, I suggest you try out Scrumming with <a href="http://scrumpad.com/" target="_blank">ScrumPad</a>. If you value “teaming” and “delivering” in sprints, <a href="http://scrumpad.com/" target="_blank">ScrumPad</a> will give you the oxygen to breathe while you sprint!</p>  <p>I suggest you follow a routine to iterate. At <a href="http://code71.com/" target="_blank">Code71</a>, we follow the below-</p>  <p><strong>Day 1:</strong> Plan for the next 9 days. Breakdown work items into smaller tasks, estimate at hours for each of the tasks and assign each task to an individual.</p>  <p><strong>Day 8: </strong>Release in test server (shadow version of the real production environment) and collect customer feedback.</p>  <p><strong>Day 9: </strong>Work on customer feedback and go live in production server. Always tag the version that is put in the production following the standard -</p>  <blockquote>   <p>R&lt;ProductReleaseVersion&gt;.S&lt;SprintNumber&gt;.B&lt;BuildNumber&gt;.P&lt;PatchNumber&gt;</p> </blockquote>  <p>This gives us the rollback point when there is any issue in the latest production deploy. Of course, we make sure we do not need to touch on the tags too often!</p>  <p>How are you sprinting? Let me know if you have a suggestion.</p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>titu</div>
<div class='content'>
Very helpful post for the beginner who want to learn about Scrum. In Code71 we are using ScrumPad from it&#39;s 2nd sprint. It helps us to speed up our project work as well as follow the Scrum. Also collaboration part is very helpful to communicate with clients specially for the team who work remotely.</div>
</div>
<div class='comment'>
<div class='author'>Tanvir</div>
<div class='content'>
Good post.I think incremental development process plays a pivotal role over waterfall in software industry(for most of our regular projects) nowadays.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/03/its-easier-to-get-lost-would-you/">Its Easier to Get Lost! Would You?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-03T00:00:00-07:00" pubdate data-updated="true">Jun 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>I was talking to a friend of mine, who started a IT start up and working full time with a few others to foster the business. He was telling me-</p>  <blockquote>   <p style="background-color: #fff200"><em>“We have 13 projects running at this moment. We are working our heart out. But, we are not finding any time to do Test Driven Development, Continuous Integration and all the good things…”</em></p> </blockquote>  <p>Well, I understand how it feels! As the title says, “Its easier to get lost!”</p>  <p><a href="http://lh4.ggpht.com/_Gr1ozXzBWpM/SiZB7nxv4hI/AAAAAAAAAFU/5Ye5BRK3vsE/s1600-h/maze%5B3%5D.jpg"><img title="maze" style="border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="338" alt="maze" src="http://lh5.ggpht.com/_Gr1ozXzBWpM/SiZB9jKM9iI/AAAAAAAAAFY/IUmlB7qh55o/maze_thumb%5B1%5D.jpg?imgmax=800" width="338" border="0" /></a>&#160;</p>  <p><em>Do you fancy getting stuck at this maze?</em></p>  <p>For startups, it is difficult to control the pulse. Because, you want to reach your billion dollar spot as early as possible, this week, or even earlier, today or even just in a few hours! And, as days go by, you start to feel the need for some process, to safeguard your efforts and quality, to hit the deadlines, to get in the rhythm of a sustainable pace.</p>  <p>But it may be really difficult to catch the ball at the first jump. We, at <a href="http://Code71.com" target="_blank">Code71</a>, believe we need to be visibly competent and confident about the quality of our work. And worked hard to get the gears together in motion. Now it is cliques great. We have got the people motivated to follow the best practices, the tools to “do more with less” and the process to ensure a “sustainable pace”. I advise, you do at least the following to learn to escape the maze from tomorrow-</p>  <ul>   <ul>     <li><strong>DIE</strong> for planning. Plan for short spans. We plan for two week sprints. </li>      <li>While planning, estimate honestly. Estimate all the hours necessary for following best practices. (producing automated test scripts may take 40% longer time, but bear with it) </li>      <li>Plan on your inputs. You cannot push your inputs. So, you may need to squeeze the output to match against your capacity. </li>      <li><strong>DIE</strong> to meet the deadline according to the plan. </li>   </ul> </ul>  <p>This is the mindset. You need to start believing to sustain. You need to plan honestly and never miss a deadline. After reaching the deadline, you retrospect. Find the loopholes and start filling those one by one. If you don’t see a loophole, find a ladder to reach higher. But do not place a ladder on a land mine!</p>  <p>Its not difficult if you have the preparation. To prepare, at a minimum do the following-</p>  <ul>   <li>Have a Continuous Integration (CI) server up and running 24x7 or <strong>DIE</strong>. (We use <a href="http://cruisecontrol.sourceforge.net/" target="_blank">CruiseControl</a>, its free and great) </li>    <li>Make your CI server to send build, test and coverage report for you. Keep an eye on the coverage report and <strong>DIE</strong> to remain well above the the 80% line. </li>    <li>Keep track of your activities for retrospect. We use <a href="http://scrumpad.com" target="_blank">ScrumPad</a>. It helps you to iterate, collaborate and deliver. </li> </ul>  <p>The keyword is <strong>“sustainable pace”</strong>. I found Scrum to address this sustainable pace really smartly. If you haven’t tried yet and looking for the loopholes to fill or the ladder to climb up, I suggest you learn about agile and <a href="http://www.goodagile.com/scrumprimer/index.html" target="_blank">Scrum</a>, find an expert and give it a try. It’s worth than you might have expected.</p>  <p>If you know a better way to keep delivering better, I will appreciate for sharing your idea to me. </p>  </div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
hmm&#8230; let me know if I can be of any help :-)</div>
</div>
<div class='comment'>
<div class='author'>R O M E L</div>
<div class='content'>
my 1st comment was just a casual comment(please take it frienly comment)&#8230; please don&#39;t take it seriously&#8230; we tried to study about scrum and follow the principles many times but could not persist&#8230;</div>
</div>
<div class='comment'>
<div class='author'>R O M E L</div>
<div class='content'>
we thought of scrum so many times and couldn&#39;t organize ourselves&#8230; :(</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/05/13/unit-test-actioncontroller-filters/">Unit/Functional Test Rails ActionController Filters Following DRY</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-13T00:00:00-07:00" pubdate data-updated="true">May 13<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>At <a href="http://scrumpad.com/" target="_blank">ScrumPad</a> most of our controllers are bounded by filters for authentication/authorization. Some filters apply to all actions in a controller while others apply to only a few or leave out only a few. However, since we are following TDD, we need to test the filter is invoked before each of the desired action. This makes the test code MOIST (not DRY)!</p><p><span style="color: rgb(0, 128, 0);"><strong>Example of Moist Code:</strong></span></p>  <p><span style="color: rgb(0, 128, 0);"><span style="color: rgb(0, 0, 0);">The following example only captures two test methods. However, if you have 30 controllers like ours and on an average 5 filters at each, you will possibly find many such duplicates making your test code so moist that it becomes shabby!</span><strong> </strong></span></p>  <pre class="brush: rails">class SomeController<br />before_filter :authenticate<br />before_filter :restrict_invalid_role<br />end<br />class SomeControllerTest<br />def test_index_redirects_without_login<br />get :index<br />assert_redirected_to :controller=&gt;:login, :action=&gt;:login<br />end<br />def test_index_redirects_without_valid_role<br />login_as(:invalid_role)<br />get :index<br />assert_redirected_to :controller=&gt;:exception, :action=&gt;:not_allowed<br />end<br />end</pre><br /><strong><span style="color: rgb(0, 128, 0);">Example of DRY Code:</span></strong><br />I came up with the following implementation to help us with unit testing the before filters. The assumption is, if your filter is invoked, it will work fine. And we are testing the filter only once. The following code is written at the end of the test/test_helper.rb.<br /><pre class="brush: rails">class ActionController::TestCase<br />##example: should_apply_before_filter_to_actions(:authenticate, [:index, :new])<br />def should_apply_before_filter_to_actions(before_filter_name, actions)<br />if(actions.nil? or actions.empty?)<br />  assert false<br />end<br />filter = find_maching_before_filter(before_filter_name)<br />actions.each do |action|<br />  assert_before_filter_applied(filter, action)<br />end<br />end<br />##example: should_apply_before_filter_to_action(:authenticate, :index)<br />def should_apply_before_filter_to_action(before_filter_name, action)<br />filter = find_maching_before_filter(before_filter_name)<br />assert_before_filter_applied(filter, action)<br />end<br /><br />##example: should_not_apply_before_filter_to_actions(:authenticate, [:index, :new])<br />def should_not_apply_before_filter_to_actions(before_filter_name, actions)<br />if(actions.nil? or actions.empty?)<br />  assert false<br />end<br />filter = find_maching_before_filter(before_filter_name)<br />actions.each do |action|<br />  assert_before_filter_not_applied(filter, action)<br />end<br />end<br /><br />##example: should_not_apply_before_filter_to_action(:authenticate, :index)<br />def should_not_apply_before_filter_to_action(before_filter_name, action)<br />filter = find_maching_before_filter(before_filter_name)<br />assert_before_filter_not_applied(filter, action)<br />end<br /><br />##example: should_apply_before_filters([:authenticate, :session_expiry])<br />def should_apply_before_filters(before_filter_names)<br />if(before_filter_names.nil? or before_filter_names.empty?)<br />  assert false, "No Before Filter is Passed"<br />end<br />before_filter_names.each {|filter| should_apply_before_filter(filter)}<br />end<br /><br />##example: should_apply_before_filter(:authenticate)<br />def should_apply_before_filter(before_filter_name)<br />filter = find_maching_before_filter(before_filter_name)<br />if(filter.nil?)<br />  assert false, "no matching filter found for #{before_filter_name}"<br />end<br />assert filter.options.empty?, "the filter #{before_filter_name} has only/except options and does not apply to all actions"<br />end<br /><br />private<br />#finds the matching BeforeFilter object<br />def find_maching_before_filter(before_filter_name)<br />filters = @controller.class.filter_chain()<br />if !filters.nil?<br />  filters.each do |filter|<br />    if(filter.is_a?(ActionController::Filters::BeforeFilter) and filter.method == before_filter_name)<br />      return filter<br />    end<br />  end<br />end<br />return nil<br />end<br /><br />#asserts a single BeforeFilter is applied on a single action<br />def assert_before_filter_applied(filter, action)<br />if(filter.nil? or action.nil?)<br />  assert false<br />end<br /><br />if(filter.options.empty?)<br />  assert true<br />  return<br />end<br />if(!filter.options[:only].nil?)<br />  assert filter.options[:only].include?(action.to_s)<br />end<br />if(!filter.options[:except].nil?)<br />  assert !filter.options[:except].include?(action.to_s)<br />end<br />end<br /><br />#asserts a single BeforeFilter is not applied on a single action<br />def assert_before_filter_not_applied(filter, action)<br />if(filter.nil? or action.nil?)<br />  assert false<br />end<br /><br />if(filter.options.empty?)<br />  assert false<br />end<br /><br />if(!filter.options[:except].nil?)<br />  assert filter.options[:except].include?(action.to_s)<br />end<br />if(!filter.options[:only].nil?)<br />  assert !filter.options[:only].include?(action.to_s)<br />end<br />end<br />end</pre>Now my test code looks like the following-<br /><pre class="brush: rails">  def test_filters<br />should_apply_before_filters(:authenticate, :restrict_invalid_role)<br />end </pre>I can use the other methods as well to get finer control if the before_filter is applied using :only or :except options. And I can use these helper methods across all my controller test classes, making the whole point of testing filters really neat and short.<br /><p>If you are familiar with shoulda tests, you will find the above code following shoulda like naming conventions. I found the above code to strip a lot of your efforts, since you eliminate all test codes that safeguard your filters.</p>Hope it helps someone with similar need.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>a_ludi</div>
<div class='content'>
Thank you for your code base! This is quite useful to me, too. And probably to many others.<br /><br />I&#39;ve refactored your code a little:<br /><br />http://pastebin.com/ybuAPfbF<br /><br />Furthermore, I would advise to put this code into the test_helper.rb file, so all your tests can use it. Then you have to declare all methods except the assert* methods as private. The assert* methods should be public.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/04/26/object-oriented-design-in-custom/">Forget Me Not! Object Oriented Design in Custom Exception</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-26T00:00:00-07:00" pubdate data-updated="true">Apr 26<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>When designing custom exceptions, you may forget about old school OO fundamentals. As a reminder, lets take a look into the following custom exception classes.</p> <pre class="brush: rails"><br />StorySaveError<br />StoryDescopeNotAllowedError<br />StoryCompleteError<br />StoryNotFoundError<br />StoryDeleteError<br />StoryDeleteNotAllowedError</pre><p>These exceptions are really useful in my application. But the bad thing is, they all derive from StandardError class, whereas there should be a base class, may be StoryError, which is more meaningful and useful. So, we can have the following-</p><pre class="brush: rails"><br />class StoryError < StandardError<br />end<br />StorySaveError < StoryError<br />StoryDescopeNotAllowedError < StoryError<br />StoryCompleteError < StoryError<br />StoryNotFoundError < StoryError<br />StoryDeleteError < StoryError<br />StoryDeleteNotAllowedError < StoryError</pre><p>With the addition of a base class for all Story related exceptions, I can write cleaner/better code.</p><ul><li>When I am not interested about the specific error, I can just use <code>rescue StoryError</code> to catch &#8216;em all</li><li>I can place a common error handling routine for all Story related exceptions</li><li>I can add new exception types without altering the codes where the specific type of StoryError is insignificant</li></ul><p>From my experience, I found that most people are not cautious about OO when desiging custom exceptions. (because they are exceptions!). Nonetheless, if you follow the OO guides, it will pay off for sure.</p>  </div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
Yes, that is another way. Usually, people use ErrorCode to designate such cases. For example, WebException has many error codes in .Net. One code denotes timeout, another denotes network failure and so on.<br />One quick point, I saw you added attr_accessor :message. message is already an attribute of the Exception class, the base class of all Exceptions. So, you need not define a message property again. Its there and you can use it for free!</div>
</div>
<div class='comment'>
<div class='author'>Samiron Paul</div>
<div class='content'>
Just sharing a little experience. A situation where user may be failed to delete a task for any of two type of restrictions. But in both case &quot;TaskDeleteNotAllowed&quot; type exception will be raising. Hence it will not be possible to show the exact reason to user. Now instead of being so conservative by creating a new class, we came out in the following way<br /><br />Added a attribute in TaskDeleteNotAllowed:<br />Class TaskDeleteNotAllowed &lt; StandardError<br />    attr_accessor :message<br />end<br /><br />Create an instance of the class while before raising:<br />exception = TaskDeleteNotAllowed.new<br /><br />Setting custom message based on the error occurred and raise that:<br />exception.message = &quot;Task is completed&quot; #or any other message<br />raise exception<br /><br />Of course rescuing the error as following:<br />&#8230;<br />rescue TaskDeleteNotAllowed =&gt; error<br />   #show {error.message} in flash or write in log<br />&#8230;<br />That makes a proper sense to user whenever she fails to delete a task.<br /><br />Anyway, being concerned with OO fundamentals in  designing custom exception handlers is realized again.<br /><br />Thanks for the post</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/04/21/unit-test-eager-loading-in-rails/">Unit Test Eager Loading in Rails ActiveRecord Association</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-21T00:00:00-07:00" pubdate data-updated="true">Apr 21<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>To avoid the n+1 problem, you need to use eager loading in ActiveRecord object associations. An easy implementation of eager loading can be done using named scope in the following way.</p> <pre class="brush: rails">class User &lt; ActiveRecord::Base<br /> has_many :friends<br /> named_scope :eager_load_friends, :include =&gt; :fiends<br />end<br />User.find(user_id).eager_load_friends</pre>To unit test the named scope, you can use this following helper method (keep it in test_helper.rb, if you like) that I wrote for <a href="http://www.scrumpad.com/" target="_blank">ScrumPad</a><br /><pre class="brush: rails">def test_eager_loaded(model, association)<br /> assert !model.instance_variable_get("@#{association.to_s}").nil?<br />end</pre>You can then test your eager loading in the following way<br /><pre class="brush: rails">def test_eager_load_friends<br /> test_eager_loaded(User.find(1), :friends)<br />end</pre>You can also use the <a href="http://tammersaleh.com/posts/testing-named_scope" target="_blank">shoulda plug-in</a> if you like. For me, I think we should test the values returned by our named scope as opposed to shoulda approach, which tests if the code is written as expected.<br /><p>Got another solution? I will appreciate if you share.</p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Ashrafuzzaman</div>
<div class='content'>
Really useful.<br />And a clean way to reuse query.<br />Thanks for shearing</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/04/15/implementing-template-method-in-rails/">Implementing Template Method in Rails Controllers Using Module and Mixin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-15T00:00:00-07:00" pubdate data-updated="true">Apr 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>All rails controllers are subclasses of the ApplicationController class. A typical controller class declaration will look like the following-</p> <pre class="brush: ruby;">class LoginController &lt; ApplicationController<br />#the actions go here<br />end</pre><p>With this basic information, I would like to state the problem first.</p><br /><strong><span style="color:#008000;">The Problem/Job in Hand</span></strong><br /><p>Add an action switch_project to all the controllers (&gt; 20) of the <a href="http://www.ScrumPad.com/" target="_blank">ScrumPad</a> code base. The implementations of the switch_project method will be same for all the controllers only other than the fact that, the switching destination will be different.</p><br /><strong><span style="color:#008000;">Analysis</span></strong><br /><p>Placing the switch_project action in the ApplicationController would be the best option. But, the methods of application controller are not accessible as actions. So, the following won’t work</p><br /><pre class="brush: rails">class ApplicationController<br /> def switch_project<br />   if(is_valid_switch?)<br />     logger.debug(“A switch is taking place”)<br />     destination = get_destination(new_project_id)<br />     redirect_to destination<br />   end<br /> end<br />end</pre><p>if you hit http://server/login/switch_project you will get a server side error. However, if you instead place the <code>switch_project</code> inside the <code>LoginController</code>, it will work fine. But, of course at a cost. You need to copy/paste this method 20+ times as there are 20+ controllers with the same need! Horrible!</p><br /><p>Again, as I said, the <code>get_destination(new_project_id)</code> is the only part that will be different for each of the controllers. So, we definitely find a template method here.</p><br /><strong><span style="color:#008000;">The Solution</span></strong><br /><p>If you need an introduction about Module and Mixin in Ruby, please read <a href="http://www.rubycentral.com/pickaxe/tut_modules.html" target="_blank">here at ruby-doc</a>. We are going to use Mixin to implement the desired solution, efficiently.<br /><br />So, I put the <code>switch_project</code> method in a module called, <code>ProjectSwitchModule</code> inside a new file at app/controllers/project_switch_module.rb like this-</p><br /><pre class="brush: rails;">module ProjectSwitchModule<br /> def switch_project<br />   if(is_valid_switch?)<br />     logger.debug(“A switch is taking place”)<br />     destination = get_destination(new_project_id)<br />     redirect_to destination<br />   end<br /> end<br /> def is_valid_switch?<br />   #I determine if the switch is valid at this method and return boolean<br /> end<br />end</pre><p>To make it available to all my controllers, I include this module in just in the <code>ApplicationController</code> in the following way-</p><br /><pre class="brush: rails;">require ‘project_switch_module’<br />class ApplicationController<br /> include ProjectSwitchModule<br />end</pre><br /><p>Also, to provide controller specific implementation of the get_destination(project_id) method, I am just writing this method in each of the controllers in the following way-</p><br /><pre class="brush: rails">class LoginController<br /> private<br /> def get_destination(project_id)<br />   #custom destination logic for LoginController<br /> end<br />end<br />class MessageController<br /> private<br /> def get_destination(project_id)<br />   #custom destination logic for MessageController<br /> end<br />end</pre><p>Now, if I invoke <a href="http://server/login/switch_project">http://server/login/switch_project</a> or <a href="http://server/message/switch_project">http://server/message/switch_project</a> I will get the result of the switch_project action. So, this gives us an elegant way to follow design patterns for efficient implementation. It will save a lot of my time in future when I need to change the switch_project method, since I just need to change at a single place instead of 20s.</p><br /><strong><span style="color:#008000;">Afterthoughts</span></strong><br /><p>If, for a controller the switch_project needs to be different from the template at the module, it is achieved simply by overriding the switch_project inside the controller. No worries!</p><br /><p>I will appreciate any feedback on this article.</p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
Yes, in Ruby code block is a good way to implement templates. In most inumerator related templates, the library made extensive use of code blocks.</div>
</div>
<div class='comment'>
<div class='author'>Ashrafuzzaman</div>
<div class='content'>
Module and Mixin is an interesting way of implementing template.<br />&#8220;Code Block&#8221; can be one other alternative way.</div>
</div>
<div class='comment'>
<div class='author'>Arif</div>
<div class='content'>
Very good example of code reuse and single point of change.Thanks</div>
</div>
<div class='comment'>
<div class='author'>Sohan</div>
<div class='content'>
Thanks for your comment!</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
good post.</div>
</div>
</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/19/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/17/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2021/12/19/2021-to-2022/">2021 → 2022</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/11/07/open-source-strategy/">Open-source: If You Build it Right, They&#8217;ll Come</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/10/12/ui-sdk-design-principles/">UI SDK Design Principles</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/08/09/onboarding-as-a-new-engineering-manager/">Onboarding as a New Engineering Manager</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/06/18/architecture-realtime/">Software Architecture - Topic 6 - Slack and Microsoft Teams</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>LinkedIn Profile</h1>
  <p>
    <a href="http://www.linkedin.com/in/sohan">SM Sohan</a>
  </p>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/smsohan">@smsohan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'smsohan',
            count: ,
            skip_forks: ,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2021 - SM Sohan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
